{"version":3,"file":"iterable-differ-helper.js","sources":["iterable-differ-helper.ts"],"names":[],"mappings":"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","sourcesContent":["/*!\n * devextreme-angular\n * Version: 19.1.11\n * Build date: Fri May 15 2020\n *\n * Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file in the root of the project for details.\n *\n * https://github.com/DevExpress/devextreme-angular\n */\n\nimport {\r\n    Injectable,\r\n    SimpleChanges,\r\n    IterableDiffers\r\n} from '@angular/core';\r\n\r\nimport {\r\n    DxComponent\r\n} from './component';\r\n\r\n@Injectable()\r\nexport class IterableDifferHelper {\r\n\r\n    private _host: DxComponent;\r\n    private _propertyDiffers: { [id: string]: any; } = {};\r\n\r\n    constructor(private _differs: IterableDiffers) { }\r\n\r\n    setHost(host: DxComponent) {\r\n        this._host = host;\r\n    }\r\n\r\n    setup(prop: string, changes: SimpleChanges) {\r\n        if (prop in changes) {\r\n            const value = changes[prop].currentValue;\r\n            this.setupSingle(prop, value);\r\n        }\r\n    }\r\n\r\n    setupSingle(prop: string, value: any) {\r\n        if (value && Array.isArray(value)) {\r\n            if (!this._propertyDiffers[prop]) {\r\n                try {\r\n                    this._propertyDiffers[prop] = this._differs.find(value).create(null);\r\n                    return true;\r\n                } catch (e) { }\r\n            }\r\n        } else {\r\n            delete this._propertyDiffers[prop];\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    getChanges(prop: string, value: any) {\r\n        if (this._propertyDiffers[prop]) {\r\n            return this._propertyDiffers[prop].diff(value);\r\n        }\r\n    }\r\n\r\n    checkChangedOptions(propName: string, hostValue: any) {\r\n        return this._host.changedOptions[propName] === hostValue;\r\n    };\r\n\r\n    doCheck(prop: string) {\r\n        if (this._propertyDiffers[prop]) {\r\n            let hostValue = this._host[prop],\r\n                isChangedOption = this.checkChangedOptions(prop, hostValue);\r\n\r\n            const changes = this.getChanges(prop, hostValue);\r\n            if (changes && this._host.instance && !isChangedOption) {\r\n                this._host.lockWidgetUpdate();\r\n                this._host.instance.option(prop, hostValue);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n"]}