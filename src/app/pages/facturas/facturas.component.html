<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div class="text-right">
                    <button [routerLink]="['/factura','nuevo']" type="button"
                        class="btn waves-effect waves-light btn-rounded btn-primary">
                        <i class="fa fa-plus"> Crear Factura</i>
                    </button>
                </div>

                <h3 class="card-title">Facturas registradas (<small>{{totalRegistros}}</small>)</h3>

                <dx-data-grid [dataSource]="this.facturas"
                              [allowColumnReordering]="true"
                              [allowColumnResizing]="true"
                              [columnAutoWidth]="true"
                              [columnHidingEnabled]="false"
                              [columnMinWidth]="50"
                              [columnResizingMode]="'nextColumn'"
                              [hoverStateEnabled]="true"
                              [rowAlternationEnabled]="true"
                              [showBorders]="true"
                              [showColumnLines]="true"
                              [showRowLines]="false"
                              >

                              <dxo-grouping
                                    [autoExpandAll]="false"
                              ></dxo-grouping>

                              <dxo-selection 
                              mode="multiple">
                              </dxo-selection>

                              <dxo-export
                              fileName="Reporte 1"
                              [allowExportSelectedData]="true"
                              [enabled]="true"
                              >
                              </dxo-export>

                              <dxo-column-chooser
                              mode="dragAndDrop"
                              [allowSearch]="true"
                              [enabled]="true">
                              </dxo-column-chooser>

                              <dxo-search-panel
                              [highlightCaseSensitive]="false"
                              [visible]="true"
                              [width]="300">
                              </dxo-search-panel>

                              <dxo-sorting
                              mode="multiple">
                              </dxo-sorting>

                              <dxo-header-filter
                              [visible]="true">
                              </dxo-header-filter>

                              <dxo-filter-row 
                              [visible]="true">
                              </dxo-filter-row>

                              <dxo-filter-panel
                              [filterEnabled]="true"
                              [visible]="true">
                              </dxo-filter-panel>

                              <dxo-load-panel
                              [enabled]="true"
                              [indicatorSrc]="'../../../../assets/images/dia-b.png'"
                              [showIndicator]="true"
                              [showPane]="true">
                              </dxo-load-panel>

                              <dxo-paging 
                              [pageSize]="10"
                              [pageIndex]="1"> <!-- Shows the second page -->
                              </dxo-paging>

                              
                              <dxi-column dataField="cliente.nombre" [groupIndex]="0" [caption]="'Cliente'"></dxi-column>


                                <dxi-column type="buttons" [caption]="'Acciones'">
                                    <dxi-button template="myCommand">
                                    
                                        <div *dxTemplate="let factura of 'myCommand'" class="text-center">
                                            <button class="btn btn-primary mr-2" [routerLink]="['/factura', factura.data._id]"><i class="fa fa-edit"></i></button>
                                            <button class="btn btn-danger" (click)="borrarFactura(factura.data)"><i class="fa fa-trash-o"></i></button>
                                        </div>
                                    </dxi-button>
                                </dxi-column>

 
 
                                

                                <dxi-column 
                                [caption]="'Tipo'" 
                                [allowFiltering]="true" 
                                [dataField]="'tipo'"                
                                ></dxi-column>

                                <dxi-column 
                                [caption]="'# Factura'" 
                                [allowFiltering]="true" 
                                [dataField]="'numFactura'"                
                                ></dxi-column>

                                <!-- <dxi-column 
                                [caption]="'Fecha'" 
                                [allowFiltering]="true" 
                                dataField="fecha" 
                                cellTemplate="cityCell"                
                                ></dxi-column>
                                <div *dxTemplate="let data of 'cityCell'">  
                                    {{data.displayValue | date:'dd/MM/yyyy'}}  
                                </div> -->

                                <dxi-column 
                                [caption]="'Fecha'" 
                                [allowFiltering]="true" 
                                [dataField]="'fecha'"
                                dataType="date"                
                                ></dxi-column>

                                <dxi-column 
                                [caption]="'Concepto'" 
                                [allowFiltering]="true" 
                                [dataField]="'concepto'"                
                                ></dxi-column>

                                <dxi-column 
                                [caption]="'Base Imponible IVA 0%'" 
                                [allowFiltering]="true" 
                                [dataField]="'bImponible0'"                
                                ></dxi-column>

                                <dxi-column 
                                [caption]="'Base Imponible IVA'" 
                                [allowFiltering]="true" 
                                [dataField]="'bImponible'"                
                                ></dxi-column>
                                
                                <dxi-column 
                                [caption]="'IVA %'" 
                                [allowFiltering]="true" 
                                [dataField]="'iva'"                
                                ></dxi-column>

                                <dxi-column 
                                [caption]="'Total'" 
                                [allowFiltering]="true" 
                                [dataField]="'total'"                
                                ></dxi-column>

                               <!--  <dxi-column 
                                [caption]="'Base Imp. Ret.'" 
                                [allowFiltering]="true" 
                                [dataField]="'bImpRet'"                
                                ></dxi-column> -->

                                <dxi-column 
                                [caption]="'Comprobante'" 
                                [allowFiltering]="true" 
                                [dataField]="'cbte'"                
                                ></dxi-column>

                                <dxi-column 
                                [caption]="'Agente'" 
                                [allowFiltering]="true" 
                                [dataField]="'agnt'"                
                                ></dxi-column>

                                <dxi-column 
                                [caption]="'IR'" 
                                [allowFiltering]="true" 
                                [dataField]="'retIr'"                
                                ></dxi-column>

                                <dxi-column 
                                [caption]="'Iva'" 
                                [allowFiltering]="true" 
                                [dataField]="'retIva'"                
                                ></dxi-column>

                                <dxi-column 
                                [caption]="'Total'" 
                                [allowFiltering]="true" 
                                [dataField]="'total2'"                
                                ></dxi-column>
                               
                </dx-data-grid>
                
            </div>
        </div>
    </div>
</div>


